{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.local/schemas/mb-album-v1.json",
  "title": "MB Album (Minimal)",
  "type": "object",
  "required": ["source", "identifiers", "title", "label", "date", "format", "tracks"],
  "properties": {
    "source": {
      "type": "object",
      "required": ["site", "collected_at"],
      "properties": {
        "site": { "type": "string", "const": "musicbrainz" },
        "collected_at": { "type": "string", "format": "date-time" }
      }
    },
    "identifiers": {
      "type": "object",
      "required": ["catalog_number"],
      "properties": {
        "catalog_number": { "type": "string" },
		"catalog_numbers": { "type": "array", "items": { "type": "string" } },
		"catalog_number_compact": {
		  "type": ["string", "null"],
		  "pattern": "^[A-Za-z0-9-]+\\d+(?:~\\d+)?(?:,\\s*[A-Za-z0-9-]+\\d+(?:~\\d+)?)*$"
		},
        "barcode": { "type": ["string", "null"] },
        "mbids": {
          "type": "object",
          "properties": {
            "release": { "type": ["string", "null"], "pattern": "^[0-9a-f-]{36}$" },
            "release_group": { "type": ["string", "null"], "pattern": "^[0-9a-f-]{36}$" },
            "label": { "type": ["string", "null"], "pattern": "^[0-9a-f-]{36}$" }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "title": {
      "type": "object",
      "required": ["product_name"],
      "properties": {
        "product_name": { "type": "string", "minLength": 1 },
		"edition_name": { "type": ["string", "null"] }
      },
      "additionalProperties": false
    },
    "artist_credit": {
      "type": "array",
      "items": { "type": "string" }
    },
    "artist_display": { "type": ["string", "null"] },
    "label": { "type": "string" },
    "date": { "type": "string", "pattern": "^\\d{4}(-\\d{2}){0,2}$" },
    "country": { "type": ["string", "null"] },
    "format": { "type": ["string", "null"] },
    "tracks": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["disc", "no", "title"],
        "properties": {
          "disc": { "type": "integer", "minimum": 1 },
          "no": { "type": "integer", "minimum": 1 },
          "title": { "type": "string" },
		  "length": { "type": ["string","null"], "pattern": "^\\d{1,2}:\\d{2}$" },
          "length_ms": { "type": ["integer", "null"], "minimum": 0 }
        },
        "additionalProperties": false
      }
    },
    "images": {
      "type": "object",
      "properties": {
        "cover": {
          "type": "object",
          "properties": {
            "mime": { "type": "string" },
            "bytes": { "type": ["integer", "null"] },
            "comment": { "type": ["string", "null"] }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
